<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Telegram WebApp Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/remixicon/fonts/remixicon.css" rel="stylesheet">
  <style>
    body { margin: 0; font-family: Arial, sans-serif; background: #f8fafc; }
    .profile-card { padding: 20px; display: flex; align-items: center; gap: 15px; background: #1e293b; color: white; }
    .profile-pic { width: 60px; height: 60px; border-radius: 50%; object-fit: cover; border: 2px solid #fff; }
    .user-info h2 { margin: 0; font-size: 18px; }
    .user-info p { margin: 2px 0; font-size: 13px; color: #cbd5e1; }

    .content { padding: 20px; }
    .card { background: #fff; border-radius: 12px; padding: 15px; margin-bottom: 15px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    .card p { margin: 5px 0; font-size: 14px; }

    input { padding: 8px; width: 100%; margin: 5px 0; border: 1px solid #ddd; border-radius: 6px; }
    button { width: 100%; padding: 10px; background: #1e293b; color: #fff; border: none; border-radius: 6px; cursor: pointer; }

    /* Bottom nav */
    .bottom-nav { position: fixed; bottom: 0; left: 0; width: 100%; background: #fff; display: flex; justify-content: space-around; border-top: 1px solid #ddd; }
    .bottom-nav button { flex: 1; padding: 10px; border: none; background: none; font-size: 12px; color: #555; display: flex; flex-direction: column; align-items: center; }
    .bottom-nav button i { font-size: 20px; margin-bottom: 2px; }
    .bottom-nav button.active { color: #1e293b; font-weight: bold; }
  </style>
</head>
<body>

  <!-- Top Profile -->
  <div class="profile-card">
    <img id="profilePic" class="profile-pic" src="" alt="Profile Picture">
    <div class="user-info">
      <h2 id="userName">Name</h2>
      <p>ID: <span id="userId"></span></p>
      <p>@<span id="userUsername"></span></p>
    </div>
  </div>

  <!-- Content -->
  <div class="content">
    <div class="card">
      <p>Email: <input id="userEmail" placeholder="Enter Email"></p>
      <p>City: <input id="userCity" placeholder="Enter City"></p>
      <p>Balance: $<input id="userBalance" type="number" step="0.01"></p>
      <p>Referral ID: <input id="userRef" placeholder="Referral ID"></p>
      <button id="saveBtn">ðŸ’¾ Save Info</button>
    </div>
  </div>

  <!-- Bottom Navigation -->
  <div class="bottom-nav">
    <button id="navHome" class="active"><i class="ri-home-4-line"></i>Home</button>
    <button id="navWallet"><i class="ri-wallet-3-line"></i>Wallet</button>
    <button id="navRefer"><i class="ri-team-line"></i>Refer</button>
    <button id="navProfile"><i class="ri-user-3-line"></i>Profile</button>
  </div>

<script>
  // Telegram WebApp init
  const tg = window.Telegram.WebApp || null;
  tg && tg.expand();

  // If inside Telegram, get real user data
  let user = tg ? tg.initDataUnsafe.user : {
    id: "0000",
    first_name: "Test",
    username: "local_test",
    photo_url: "https://via.placeholder.com/70"
  };

  // Set profile data
  document.getElementById("userName").innerText = user.first_name + (user.last_name ? " " + user.last_name : "");
  document.getElementById("userId").innerText = user.id;
  document.getElementById("userUsername").innerText = user.username || "no_username";
  document.getElementById("profilePic").src = user.photo_url || "https://via.placeholder.com/70";

  // LocalStorage keys
  const emailKey = `email_${user.id}`;
  const cityKey = `city_${user.id}`;
  const balanceKey = `balance_${user.id}`;
  const refKey = `ref_${user.id}`;

  // Load saved values
  document.getElementById("userEmail").value = localStorage.getItem(emailKey) || "";
  document.getElementById("userCity").value = localStorage.getItem(cityKey) || "";
  document.getElementById("userBalance").value = localStorage.getItem(balanceKey) || "0";
  document.getElementById("userRef").value = localStorage.getItem(refKey) || "";

  // Save info
  document.getElementById("saveBtn").addEventListener("click", () => {
    localStorage.setItem(emailKey, document.getElementById("userEmail").value);
    localStorage.setItem(cityKey, document.getElementById("userCity").value);
    localStorage.setItem(balanceKey, document.getElementById("userBalance").value);
    localStorage.setItem(refKey, document.getElementById("userRef").value);
    alert("âœ… Info saved locally!");
  });

  // Nav buttons highlight
  document.querySelectorAll(".bottom-nav button").forEach(btn => {
    btn.addEventListener("click", () => {
      document.querySelectorAll(".bottom-nav button").forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
    });
  });
</script>

</body>
</html>
